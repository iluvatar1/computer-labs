FNAME=/tmp/motd
TSTAMP=$(date +"%Y-%m-%d-T%H-%M-%S")
cat <<EOF > $FNAME
[1;36m 
Slackware 14.2+ (current)
Linux 4.19.84.
[1;0m

██████╗ ██╗███████╗███╗   ██╗██╗   ██╗███████╗███╗   ██╗██╗██████╗  ██████╗     ██╗ █████╗                             
██╔══██╗██║██╔════╝████╗  ██║██║   ██║██╔════╝████╗  ██║██║██╔══██╗██╔═══██╗   ██╔╝██╔══██╗                            
██████╔╝██║█████╗  ██╔██╗ ██║██║   ██║█████╗  ██╔██╗ ██║██║██║  ██║██║   ██║  ██╔╝ ███████║                            
██╔══██╗██║██╔══╝  ██║╚██╗██║╚██╗ ██╔╝██╔══╝  ██║╚██╗██║██║██║  ██║██║   ██║ ██╔╝  ██╔══██║                            
██████╔╝██║███████╗██║ ╚████║ ╚████╔╝ ███████╗██║ ╚████║██║██████╔╝╚██████╔╝██╔╝   ██║  ██║                            
╚═════╝ ╚═╝╚══════╝╚═╝  ╚═══╝  ╚═══╝  ╚══════╝╚═╝  ╚═══╝╚═╝╚═════╝  ╚═════╝ ╚═╝    ╚═╝  ╚═╝                            
███████╗ █████╗ ██╗      █████╗     ██████╗ ███████╗     ██████╗ ██████╗ ███╗   ███╗██████╗ ██╗   ██╗████████╗ ██████╗ 
██╔════╝██╔══██╗██║     ██╔══██╗    ██╔══██╗██╔════╝    ██╔════╝██╔═══██╗████╗ ████║██╔══██╗██║   ██║╚══██╔══╝██╔═══██╗
███████╗███████║██║     ███████║    ██║  ██║█████╗      ██║     ██║   ██║██╔████╔██║██████╔╝██║   ██║   ██║   ██║   ██║
╚════██║██╔══██║██║     ██╔══██║    ██║  ██║██╔══╝      ██║     ██║   ██║██║╚██╔╝██║██╔═══╝ ██║   ██║   ██║   ██║   ██║
███████║██║  ██║███████╗██║  ██║    ██████╔╝███████╗    ╚██████╗╚██████╔╝██║ ╚═╝ ██║██║     ╚██████╔╝   ██║   ╚██████╔╝
╚══════╝╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝    ╚═════╝ ╚══════╝     ╚═════╝ ╚═════╝ ╚═╝     ╚═╝╚═╝      ╚═════╝    ╚═╝    ╚═════╝ 
██████╗ ██████╗ ████████╗ ██████╗     ██████╗ ███████╗    ███████╗██╗███████╗██╗ ██████╗ █████╗                        
██╔══██╗██╔══██╗╚══██╔══╝██╔═══██╗    ██╔══██╗██╔════╝    ██╔════╝██║██╔════╝██║██╔════╝██╔══██╗                       
██║  ██║██████╔╝   ██║   ██║   ██║    ██║  ██║█████╗      █████╗  ██║███████╗██║██║     ███████║                       
██║  ██║██╔═══╝    ██║   ██║   ██║    ██║  ██║██╔══╝      ██╔══╝  ██║╚════██║██║██║     ██╔══██║                       
██████╔╝██║        ██║   ╚██████╔╝    ██████╔╝███████╗    ██║     ██║███████║██║╚██████╗██║  ██║                       
╚═════╝ ╚═╝        ╚═╝    ╚═════╝     ╚═════╝ ╚══════╝    ╚═╝     ╚═╝╚══════╝╚═╝ ╚═════╝╚═╝  ╚═╝                       


En este momento ($TSTAMP) se encuentra activos los siguientes nodos con la siguiente capacidad en threads: [1;32m

EOF

clush -P -b  -w @roles:nodes 'nproc' 2> /dev/null >> $FNAME

cat <<EOF >> $FNAME
[1;0m

[1;31m *NOTA*: [1;36m No ejecute tareas en este computador. Cualquier proceso 
que tome mas de 50% de cpu por mas de 30 segundos sera eliminado [1;0m 
[1;32m Si desea volver a ver este mensaje, ejecute
cat /etc/motd
[1;0m

EOF

cp $FNAME /etc/motd 2> /dev/null
